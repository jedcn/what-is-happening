#!/usr/bin/env node

const initOctokit = require('../lib/client/initOctokit');
const analyzeUserEvents = require('../lib/userEvents/analyzeUserEvents');

const pathPrefix = process.env.PATH_PREFIX || '';
const host = process.env.HOST || 'api.github.com';
const accessToken = process.env.ACCESS_TOKEN;
const username = process.env.USER;

const octokit = initOctokit({ host, pathPrefix, accessToken });

analyzeUserEvents({ octokit, host, username })
  .then((analysis) => {
    console.log(analysis);
  }).catch(err => {
    console.log('what-is-happening: err', err);
  });
